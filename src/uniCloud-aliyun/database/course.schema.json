{
  "bsonType": "object",
  "required": ["title", "cover", "price", "category"],
  "permission": {
    "read": true,
    "create": "'administrator' === auth.role || 'editor' === auth.role",
    "update": "'administrator' === auth.role || 'editor' === auth.role",
    "delete": "'administrator' === auth.role"
  },
  "properties": {
    "_id": {
      "description": "ID，系统自动生成"
    },
    "title": {
      "bsonType": "string",
      "title": "课程标题",
      "description": "课程标题",
      "minLength": 2,
      "maxLength": 100,
      "component": {
        "name": "uni-easyform-text"
      }
    },
    "subtitle": {
      "bsonType": "string",
      "title": "副标题",
      "description": "课程副标题",
      "maxLength": 150,
      "component": {
        "name": "uni-easyform-text"
      }
    },
    "cover": {
      "bsonType": "string",
      "title": "封面图",
      "description": "课程封面图URL",
      "component": {
        "name": "uni-easyform-image"
      }
    },
    "description": {
      "bsonType": "string",
      "title": "课程描述",
      "description": "课程详细描述",
      "component": {
        "name": "uni-easyform-richtext"
      }
    },
    "price": {
      "bsonType": "number",
      "title": "价格",
      "description": "课程价格，0表示免费",
      "minimum": 0,
      "component": {
        "name": "uni-easyform-number"
      }
    },
    "originalPrice": {
      "bsonType": "number",
      "title": "原价",
      "description": "课程原价，用于显示折扣",
      "minimum": 0,
      "component": {
        "name": "uni-easyform-number"
      }
    },
    "category": {
      "bsonType": "string",
      "title": "分类",
      "description": "课程分类",
      "foreignKey": "category._id",
      "component": {
        "name": "uni-easyform-select"
      }
    },
    "tags": {
      "bsonType": "array",
      "title": "标签",
      "description": "课程标签",
      "component": {
        "name": "uni-easyform-tags"
      }
    },
    "level": {
      "bsonType": "string",
      "title": "难度级别",
      "description": "课程难度级别",
      "enum": [
        {
          "text": "入门",
          "value": "beginner"
        },
        {
          "text": "初级",
          "value": "elementary"
        },
        {
          "text": "中级",
          "value": "intermediate"
        },
        {
          "text": "高级",
          "value": "advanced"
        },
        {
          "text": "专家",
          "value": "expert"
        }
      ],
      "defaultValue": "intermediate",
      "component": {
        "name": "uni-easyform-select"
      }
    },
    "duration": {
      "bsonType": "int",
      "title": "课程时长",
      "description": "课程总时长（分钟）",
      "minimum": 0,
      "component": {
        "name": "uni-easyform-number"
      }
    },
    "sections": {
      "bsonType": "array",
      "title": "课程章节",
      "description": "课程章节列表",
      "items": {
        "bsonType": "object",
        "properties": {
          "title": {
            "bsonType": "string",
            "title": "章节标题",
            "description": "章节标题"
          },
          "lessons": {
            "bsonType": "array",
            "title": "课时列表",
            "description": "章节中的课时列表",
            "items": {
              "bsonType": "object",
              "properties": {
                "title": {
                  "bsonType": "string",
                  "title": "课时标题",
                  "description": "课时标题"
                },
                "video": {
                  "bsonType": "string",
                  "title": "视频URL",
                  "description": "课时视频URL"
                },
                "duration": {
                  "bsonType": "int",
                  "title": "时长",
                  "description": "课时时长（分钟）"
                },
                "isFree": {
                  "bsonType": "bool",
                  "title": "是否免费",
                  "description": "课时是否免费试看",
                  "defaultValue": false
                }
              }
            }
          }
        }
      }
    },
    "isRecommended": {
      "bsonType": "bool",
      "title": "是否推荐",
      "description": "是否为推荐课程",
      "defaultValue": false,
      "component": {
        "name": "uni-easyform-switch"
      }
    },
    "isHot": {
      "bsonType": "bool",
      "title": "是否热门",
      "description": "是否为热门课程",
      "defaultValue": false,
      "component": {
        "name": "uni-easyform-switch"
      }
    },
    "isNew": {
      "bsonType": "bool",
      "title": "是否新上线",
      "description": "是否为新上线课程",
      "defaultValue": true,
      "component": {
        "name": "uni-easyform-switch"
      }
    },
    "requireVip": {
      "bsonType": "bool",
      "title": "是否需要VIP",
      "description": "是否需要VIP会员才能观看",
      "defaultValue": false,
      "component": {
        "name": "uni-easyform-switch"
      }
    },
    "viewCount": {
      "bsonType": "int",
      "title": "观看人数",
      "description": "课程观看人数",
      "defaultValue": 0
    },
    "commentCount": {
      "bsonType": "int",
      "title": "评论数",
      "description": "课程评论数",
      "defaultValue": 0
    },
    "rating": {
      "bsonType": "number",
      "title": "评分",
      "description": "课程平均评分",
      "minimum": 0,
      "maximum": 5,
      "defaultValue": 5
    },
    "status": {
      "bsonType": "string",
      "title": "状态",
      "description": "课程状态",
      "enum": [
        {
          "text": "草稿",
          "value": "draft"
        },
        {
          "text": "已发布",
          "value": "published"
        },
        {
          "text": "下架",
          "value": "unpublished"
        }
      ],
      "defaultValue": "draft",
      "component": {
        "name": "uni-easyform-select"
      }
    },
    "teacher": {
      "bsonType": "string",
      "title": "讲师",
      "description": "课程讲师ID",
      "foreignKey": "teacher._id",
      "component": {
        "name": "uni-easyform-select"
      }
    },
    "publishDate": {
      "bsonType": "date",
      "title": "发布日期",
      "description": "课程发布日期",
      "component": {
        "name": "uni-easyform-datetime"
      }
    },
    "creator": {
      "bsonType": "string",
      "description": "创建者ID",
      "forceDefaultValue": {
        "$env": "uid"
      }
    },
    "createdAt": {
      "bsonType": "timestamp",
      "title": "创建时间",
      "description": "创建时间",
      "forceDefaultValue": {
        "$env": "now"
      }
    },
    "updatedAt": {
      "bsonType": "timestamp",
      "title": "更新时间",
      "description": "更新时间",
      "defaultValue": {
        "$env": "now"
      }
    }
  }
} 